<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#2561D1" />
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="apple-touch-icon" href="assets/icons/icon-192.png" />
  <title>Demande Indice</title>
  <link rel="stylesheet" href="assets/tailwind.css">
  <link href="https://fonts.googleapis.com/css2?family=Braah+One&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" crossorigin="anonymous" />
  <style>
    body {
      font-family: 'Braah One', sans-serif;
      
    }

    .degrade{
      background: linear-gradient(145deg, #0C1A3C 40%, #000000 60%);

    }
    .text-outline {
      text-shadow: -1px -1px 0 #fff, 1px -1px 0 #fff, -1px 1px 0 #fff, 1px 1px 0 #fff;
    }
  </style>
</head>
<body class="">

<div id="screen1" class="degrade text-white w-screen h-screen flex flex-col items-center justify-between py-8 px-6">
  <!-- Message coût -->
  <div class="text-center text-lg  text-white ">
    <i class="fa-solid fa-triangle-exclamation text-yellow-400"></i>
    : Cette opération coûte <span class="text-yellow-400">200 pts</span>
  </div>

  <!-- Icône œil -->
  <div>
    <img src="assets/oeil.png" alt="Oeil" class="w-[10rem]" />
  </div>

  <!-- Formulaire -->
  <div class="w-full max-w-md space-y-6">
    <div>
      <label class="block text-[1.5rem] text-center font-bold mb-2">Qui demande l’indice ?</label>
      <input type="text" class="w-full px-4 py-2 rounded-md bg-white text-black" placeholder="Nom du joueur" />
    </div>
    <div>
      <label class="block text-[1.5rem] text-center font-bold mb-2">Sur qui aimerais-tu connaître l’indice ?</label>
      <input type="text" class="w-full px-4 py-2 rounded-md bg-white text-black" placeholder="Nom ciblé" />
    </div>
  </div>

    <!-- Flèches navigation -->
  <div class="flex justify-between w-full max-w-md px-4">
    <button onclick="showScreen(1)" class="text-white text-3xl hover:text-pink-300 transition">
      <i class="fas fa-play" style="transform: scaleX(-1);"></i>
    </button>
    <button onclick="showScreen(2)" class="text-white text-3xl hover:text-pink-300 transition">
      <i class="fas fa-play"></i>
    </button>
  </div>
</div>

<!-- Écran 2 : Roue + gagnant -->
<div id="screen2" class=" bg-[#071F4C] hidden text-white w-screen h-screen flex flex-col items-center justify-between py-8 px-6">
  <!-- Titre -->
  <header class="flex items-center p-6">
    <img src="assets/logo.png" alt="Secret Story Logo" class="w-[4.5rem]" />
    <h1 class="text-[1rem] mx-4 text-black bg-white p-4 rounded-xl">Lancer la roue pour savoir qui aura le droit à l'indice.</h1>
  </header>

  <!-- Roue -->
  <div class="flex justify-center">
    <img id="wheel" src="assets/roue.png" alt="Roue" class="w-[16rem] transition-transform" />
  </div>

  <!-- Résultat -->
  <div id="result" class="text-center space-y-2 opacity-0 transition-opacity duration-500">
    <p id="winner" class="text-pink-400 font-bold text-lg"></p>
    <p id="winner-msg" class="text-white text-sm"></p>
    <p id="loser" class="text-red-500 font-bold text-lg"></p>
    <p id="loser-msg" class="text-white text-sm"></p>
  </div>
<!-- Boutons -->
<div class="flex flex-col items-center space-y-4">
  <button id="launchBtn" onclick="spinWheel()" 
          class="bg-pink-500 text-white px-6 py-2 rounded-full font-bold shadow-md hover:bg-pink-600 transition">
    LANCER
  </button>
  <button onclick="showScreen(3)" id="seeClueBtn" class="hidden bg-black px-6 py-2 rounded-full shadow-md flex items-center space-x-2">
    <img src="assets/oeil.png" alt="Oeil" class="w-6" />
    <span class="text-white font-bold text-sm">REGARDER L’INDICE</span>
  </button>
</div>

<!-- Flèches navigation -->
<div class="flex justify-between w-full max-w-md px-4">
  <button id="backBtn" onclick="showScreen(1)" 
          class="text-white text-3xl hover:text-pink-300 transition">
    <i class="fas fa-play" style="transform: scaleX(-1);"></i>
  </button>
  <button onclick="showScreen(3)" class="text-white text-3xl hover:text-pink-300 transition">
    <i class="fas fa-play"></i>
  </button>
</div>


    
  </div>

  
<div id="screen3" class="bg-[#0C1A3C] hidden absolute inset-0 bg-[#0B1B4F] flex flex-col items-center justify-center text-center ">
    <div class="bg-white border-[3px] border-pink-500 rounded-xl shadow-lg px-6 py-8 max-w-md w-[80%] h-[60%] mx-6 my-16 ">
      <h2 class="text-black text-lg mb-4">L'INDICE :</h2>
      <p class="text-pink-500 text-xl font-bold mb-6">Je change d'identité plusieurs fois par an.</p>
      <img src="assets/key.png" alt="Icône secret" class="h-[65%] mx-auto mb-6" />
    </div>

    <div class="bg-black w-full h-[30%]">
    <img src="assets/oeil.png" alt="Secret Story Logo" class="w-[10rem] relative bottom-8 mx-auto mb-6" />
      <button class="bg-pink-500 text-white px-6 py-3 rounded-full text-[1.5rem] shadow-md hover:bg-pink-600 transition">
        J'ai vu l'indice
      </button>
    </div>

<script>

  let wheelLaunched = false;

  function showScreen(n) {
    // Empêche retour si la roue a été lancée
    if (wheelLaunched && n === 1) return;

    document.getElementById('screen1')?.classList.toggle('hidden', n !== 1);
    document.getElementById('screen2')?.classList.toggle('hidden', n !== 2);
    document.getElementById('screen3')?.classList.toggle('hidden', n !== 3);
  }

  function spinWheel() {
    const wheel = document.getElementById('wheel');
    const result = document.getElementById('result');
    const winner = document.getElementById('winner');
    const winnerMsg = document.getElementById('winner-msg');
    const loser = document.getElementById('loser');
    const loserMsg = document.getElementById('loser-msg');
    const seeClueBtn = document.getElementById('seeClueBtn');
    const backBtn = document.getElementById('backBtn');
    const launchBtn = document.getElementById('launchBtn');

    wheelLaunched = true;

    // Désactive le bouton LANCER après le premier clic
    launchBtn.disabled = true;
    launchBtn.classList.add("opacity-50", "cursor-not-allowed");

    // Rend le bouton retour invisible et inactif
    backBtn.disabled = true;
    backBtn.classList.add("opacity-0", "cursor-not-allowed");

    result.style.opacity = 0;
    wheel.classList.remove('spin');
    void wheel.offsetWidth;
    wheel.classList.add('spin');

    setTimeout(() => {
      const gagnant = Math.random() < 0.5 ? 'JOUEUR 1' : 'JOUEUR 2';
      const perdant = gagnant === 'JOUEUR 1' ? 'JOUEUR 2' : 'JOUEUR 1';

      winner.textContent = `GAGNANT : ${gagnant}`;
      winnerMsg.textContent = 'Tu peux regarder l’indice.';
      loser.textContent = `PERDANT : ${perdant}`;
      loserMsg.textContent = 'Tu perds 200pts. Score actuel : 1200';

      result.style.opacity = 1;

      // Affiche le bouton "REGARDER L’INDICE"
      seeClueBtn.classList.remove("hidden");
    }, 2100);
  }

</script>


<style>
  .spin {
    animation: spin 2s ease-out forwards;
  }
  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(1440deg); }
  }
</style>


</body>
<script src="register-sw.js"></script>
</html>
